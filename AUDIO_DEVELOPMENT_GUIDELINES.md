# オーディオ開発ガイドライン

## 音声ファイル形式
- **WAVファイルのみをサポート**: MP3サポートは廃止されました
- すべての音声ファイルは `.wav` 形式で提供してください
- 基準音源と録音音源の両方で同じ形式を使用することで、ピッチ検出ロジックを統一

## テスト・シミュレーションデータの禁止
- **実際のデータのみを使用**: シミュレーション、テスト、サンプルデータの使用を禁止
- 実際のオーディオファイルが存在しない場合、適切なエラーメッセージを表示
- デバッグ目的で一時的にテストデータが必要な場合も、機能完成後は必ず削除

## ピッチ検出の統一
- 基準ピッチと録音ピッチで同じピッチ検出APIと処理ロジックを使用
- `detector.getPitchFromIntBuffer()` を統一APIとして使用
- オクターブ補正、音量フィルタリング、動的推定などの処理を両方に適用

## エラーハンドリング
- 音声ファイルが見つからない場合は明確なエラーメッセージを表示
- フォールバック処理でシミュレーションデータを生成せず、適切なエラーを投げる
- ユーザーに実際のWAVファイルの準備を促す

## ファイル命名規則
- 音声ファイル: `SongName.wav`
- アセットパス: `assets/sounds/SongName.wav`
- song.jsonでの参照: `"audioFile": "assets/sounds/SongName.wav"`

## 開発者への注意事項
- MP3関連のコードは `@Deprecated` マークを付け、WAVファイル使用を促すエラーメッセージを表示
- シミュレーション関連のメソッド（`_generateRealisticAudioPattern` など）は削除済み
- 実際のピアノ演奏などの音源を使用して、リアルなピッチ検出結果を得る

## 今後の方針
1. 実際のWAVファイルによる基準音源を準備
2. 録音との比較で同じ音源・同じロジックを使用
3. テストデータに頼らない、実際のユースケースでの検証を実施
