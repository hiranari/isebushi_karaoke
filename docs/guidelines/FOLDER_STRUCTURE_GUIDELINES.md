# ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

## åŸºæœ¬åŸå‰‡

### 1. é©åˆ‡ãªåˆ†é›¢
- **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰**: `lib/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- **é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«**: `tools/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- **ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰**: `test/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: `docs/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¾ãŸã¯`*.md`ãƒ•ã‚¡ã‚¤ãƒ«

### 2. éšå±¤æ§‹é€ 
- æ©Ÿèƒ½åˆ¥ãƒ»è²¬å‹™åˆ¥ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†å‰²
- ãƒã‚¹ãƒˆã¯3å±¤ã¾ã§
- æ˜ç¢ºãªå‘½åè¦å‰‡ã®é©ç”¨

## æ¨å¥¨ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ

```
isebushi_karaoke/
â”œâ”€â”€ lib/                           # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“
â”‚   â”œâ”€â”€ main.dart                  # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ song_select_page.dart      # æ­Œé¸æŠãƒšãƒ¼ã‚¸ï¼ˆè¦ç§»å‹•ï¼‰
â”‚   â”œâ”€â”€ application/               # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ core/                      # å…±é€šæ©Ÿèƒ½
â”‚   â”‚   â””â”€â”€ utils/                 # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ domain/                    # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ infrastructure/            # å¤–éƒ¨ä¾å­˜
â”‚   â”œâ”€â”€ pages/                     # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆè¦çµ±åˆï¼‰
â”‚   â”œâ”€â”€ presentation/              # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚   â””â”€â”€ pages/                 # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ services/                  # ã‚µãƒ¼ãƒ“ã‚¹å±¤
â”œâ”€â”€ test/                          # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ tools/                         # é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ audio/                     # éŸ³å£°å‡¦ç†ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ debug/                     # ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ scripts/                   # ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ„ãƒ¼ãƒ«
â”‚   â””â”€â”€ testing/                   # ãƒ†ã‚¹ãƒˆç”¨ãƒ„ãƒ¼ãƒ«
â”œâ”€â”€ assets/                        # ã‚¢ã‚»ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ data/                      # ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ images/                    # ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ sounds/                    # éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ splash/                    # ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ç”»é¢
â”œâ”€â”€ docs/                          # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ architecture/              # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é–¢é€£
â”‚   â”œâ”€â”€ compliance/                # ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹
â”‚   â”œâ”€â”€ development/               # é–‹ç™ºé–¢é€£
â”‚   â””â”€â”€ guidelines/                # ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
â”œâ”€â”€ config/                        # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ examples/                      # ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ scripts/                       # å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆè¦ç§»å‹•ï¼‰
â””â”€â”€ [ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰]/        # android/, ios/, web/, etc.
```

## ç¾åœ¨ã®å•é¡Œã¨ä¿®æ­£è¨ˆç”»

### 1. æ§‹é€ ã®å•é¡Œ
- âŒ `lib/song_select_page.dart` â†’ `lib/presentation/pages/`ã¸ç§»å‹•
- âŒ `lib/pages/` â†’ `lib/presentation/pages/`ã¸çµ±åˆ
- âŒ ãƒ«ãƒ¼ãƒˆã®`.dart`ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ â†’ `tools/`ã¸ç§»å‹•
- âŒ `scripts/` â†’ `tools/scripts/`ã¸ç§»å‹•

### 2. ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†é¡
- **ãƒ‡ãƒãƒƒã‚°ãƒ»è§£æãƒ„ãƒ¼ãƒ«**: 
  - `analyze_*.dart`, `debug_*.dart`, `verify_*.dart`
  - â†’ `tools/debug/` ã¾ãŸã¯ `tools/analysis/`
- **ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«**: 
  - `test_*.dart`, `check_*.dart`
  - â†’ `tools/testing/`
- **éŸ³å£°å‡¦ç†ãƒ„ãƒ¼ãƒ«**: 
  - `*_wav*.dart`, `generate_*.dart`, `fix_*.dart`
  - â†’ `tools/audio/`

### 3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ•´ç†
- **ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³é¡**: `docs/guidelines/`
- **é–‹ç™ºæŒ‡é‡**: `docs/development/`
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: `docs/architecture/`

## å®Ÿè¡Œã™ã¹ãç§»å‹•æ“ä½œ

### Phase 1: ãƒ„ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®ç§»å‹•
```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«
mkdir -p tools/debug
mv analyze_*.dart tools/debug/
mv debug_*.dart tools/debug/
mv verify_*.dart tools/debug/

# éŸ³å£°å‡¦ç†ãƒ„ãƒ¼ãƒ«
mkdir -p tools/audio
mv *_wav*.dart tools/audio/
mv generate_*.dart tools/audio/
mv fix_*.dart tools/audio/
mv compare_*.dart tools/audio/
mv find_*.dart tools/audio/

# ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«
mkdir -p tools/testing
mv test_*.dart tools/testing/
mv check_*.dart tools/testing/

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆçµ±åˆ
mv scripts/* tools/scripts/
rmdir scripts
```

### Phase 2: libãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ•´ç†
```bash
# ãƒšãƒ¼ã‚¸ã®çµ±åˆ
mv lib/song_select_page.dart lib/presentation/pages/
rm -rf lib/pages  # çµ±åˆå¾Œå‰Šé™¤

# ã‚µãƒ¼ãƒ“ã‚¹ã®æ•´ç†
# å¿…è¦ã«å¿œã˜ã¦lib/services/ã‚’lib/application/services/ã¸ç§»å‹•
```

### Phase 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ•´ç†
```bash
mkdir -p docs/guidelines docs/development docs/architecture
mv *_GUIDELINES.md docs/guidelines/
mv PHASE*.md docs/development/
mv UML_*.md docs/architecture/
```

## å‘½åè¦å‰‡

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- å°æ–‡å­—ã®ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ï¼ˆä¾‹: `user_interface`, `audio_processing`ï¼‰
- è¤‡æ•°å½¢ã‚’ä½¿ç”¨ï¼ˆä¾‹: `services`, `utils`, `pages`ï¼‰

### ãƒ•ã‚¡ã‚¤ãƒ«
- å°æ–‡å­—ã®ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ï¼ˆä¾‹: `user_service.dart`, `audio_utils.dart`ï¼‰
- æ©Ÿèƒ½ã‚’æ˜ç¢ºã«è¡¨ç¾ã™ã‚‹åå‰
- çœç•¥å½¢ã¯é¿ã‘ã‚‹

### ã‚¯ãƒ©ã‚¹
- ãƒ‘ã‚¹ã‚«ãƒ«ã‚±ãƒ¼ã‚¹ï¼ˆä¾‹: `UserService`, `AudioProcessor`ï¼‰
- å˜ä¸€è²¬ä»»åŸå‰‡ã«å¾“ã£ãŸå‘½å

## ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«

### ç›¸å¯¾ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
```dart
// åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…
import 'user_service.dart';

// åŒã˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…
import '../core/utils/debug_logger.dart';
```

### çµ¶å¯¾ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
```dart
// ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ«ãƒ¼ãƒˆ
import 'package:isebushi_karaoke/core/utils/debug_logger.dart';
```

## é™¤å¤–ãƒ«ãƒ¼ãƒ«

### gitignoreã«è¿½åŠ ã™ã¹ãã‚‚ã®
- ä¸€æ™‚çš„ãªãƒ‡ãƒãƒƒã‚°ãƒ•ã‚¡ã‚¤ãƒ«
- ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«
- ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰ã®è¨­å®š

### ã‚¢ãƒ—ãƒªãƒ“ãƒ«ãƒ‰ã‹ã‚‰é™¤å¤–
- `tools/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå…¨ä½“
- é–‹ç™ºç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- ãƒ†ã‚¹ãƒˆå°‚ç”¨ãƒ•ã‚¡ã‚¤ãƒ«

## ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [x] Phase 1: ãƒ„ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•å®Œäº†
- [x] Phase 2: libãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ•´ç†å®Œäº†  
- [x] Phase 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´ç†å®Œäº†
- [x] ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ã®ä¿®æ­£å®Œäº†
- [x] ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã®è§£æ¶ˆ
- [x] ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œç¢ºèª

## ğŸ‰ æ•´ç†å®Œäº†çŠ¶æ³

### âœ… é”æˆã•ã‚ŒãŸæ”¹å–„
- **ã‚¨ãƒ©ãƒ¼æ•°**: æ•°åå€‹ â†’ 0å€‹ï¼ˆå®Œå…¨è§£æ¶ˆï¼‰
- **è­¦å‘Šæ•°**: è¨­è¨ˆãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ç³»ã®119å€‹ã®ã¿ï¼ˆæ©Ÿèƒ½ä¸Šå•é¡Œãªã—ï¼‰
- **æ§‹é€ **: Clean Architectureã«æº–æ‹ ã—ãŸéšå±¤åŒ–å®Œäº†
- **åˆ†é›¢**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã¨é–‹ç™ºãƒ„ãƒ¼ãƒ«ã®æ˜ç¢ºãªåˆ†é›¢

### ğŸ“Š ç¾åœ¨ã®æ§‹æˆ
```
isebushi_karaoke/
â”œâ”€â”€ lib/                           # âœ… ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“
â”‚   â”œâ”€â”€ main.dart                  # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ presentation/pages/        # âœ… UIãƒšãƒ¼ã‚¸ï¼ˆsong_select_page.dartå«ã‚€ï¼‰
â”‚   â”œâ”€â”€ core/utils/               # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ services/                 # ã‚µãƒ¼ãƒ“ã‚¹å±¤
â”‚   â”œâ”€â”€ application/              # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ domain/                   # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â””â”€â”€ infrastructure/           # å¤–éƒ¨ä¾å­˜
â”œâ”€â”€ tools/                        # âœ… é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ debug/                    # ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ audio/                    # éŸ³å£°å‡¦ç†ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ testing/                  # ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«
â”‚   â””â”€â”€ scripts/                  # å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ docs/                         # âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ guidelines/               # ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ï¼ˆæœ¬ãƒ•ã‚¡ã‚¤ãƒ«å«ã‚€ï¼‰
â”‚   â”œâ”€â”€ development/              # é–‹ç™ºè³‡æ–™
â”‚   â””â”€â”€ architecture/             # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
â””â”€â”€ assets/                       # ã‚¢ã‚»ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«
```

### ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **æ©Ÿèƒ½å®Ÿè£…**: 
   - PitchDetectionServiceã®å®Ÿè£…
   - éŸ³å£°å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å®Œæˆ

2. **å“è³ªå‘ä¸Š**: 
   - ã‚¹ã‚¿ã‚¤ãƒ«è­¦å‘Šã®ä¿®æ­£ï¼ˆoptionalï¼‰
   - ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®å‘ä¸Š

3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: 
   - APIä»•æ§˜æ›¸ã®æ›´æ–°
   - å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã®ä½œæˆ

## å‚è€ƒè³‡æ–™

- [Dart Package Layout Conventions](https://dart.dev/tools/pub/package-layout)
- [Flutter App Architecture Best Practices](https://docs.flutter.dev/development/data-and-backend/state-mgmt/options)
- [Clean Architecture in Flutter](https://resocoder.com/2019/08/27/flutter-tdd-clean-architecture-course-1-explanation-project-structure/)
